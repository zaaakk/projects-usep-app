{% extends "usep_templates/base.html" %}

{% load vocab %}

{% block page_title%}Search Inscriptions{% endblock %}
{% block head_title%}Search{% endblock %}

{% block in_page_css%}
<style>
    
#content a {
    color:#99827e;
}
#content  a:visited {
    color:#99827e;
}
#content a:link {
    color:#a08783;
}

#content a:link a:visited {
    color:#a08783;
}

#content a:hover,a:active {
	color:#99827e;
	}


	#pagetitle {
	
	}
	#searchform {
	display:block;
	max-width:600px;
	background:#efeae4;
	padding-top:1.5em;
	padding:2em;
	margin-left:auto;
	margin-right:auto;
        border-style: solid;
    border-width: 1px;
    border-color:#999999; 
	}
	
	label {
	margin-bottom:15px;
	}
	#content {
		margin-left:auto;
		margin-right:auto;
		font-size: 1em;
		width: 70%;
		min-width:400px;
	}

	#advanced {
		border: none;
		height: 0px;
		transition: height 1s ease, opacity 0.1s;
		overflow: hidden;
		padding: 0;
	}

	#advanced tr {
		height: 1.2in;
	}
	
	fieldset {
	width:100%;
	}
	
    
    
    @media screen and (max-width:480px) 
	{
	
        	#advanced_container {
        font-size:11px;
		max-width:400px;
        padding:10px;
    }
    
    #advanced_container table th {
        padding:0;
    }
        
        #advanced select[multiple] {
		width: 100px;
		height: 50px;
		float: left;
		margin-left: 10px;
	}
		
		}

	table th {
		padding-right: 1cm;
	}

	table th,table td {
		border-bottom: 1px solid slategray;
		min-height: 1in;
	}

	#advanced select[multiple] {
		width: 2.5in;
		height: 1in;
		float: left;
		margin-left: 2cm;
	}
	

	input[type='text'] {
		width: 100%;
		height: 20px;
		margin:10px;
        
	}

	input[type='submit'] {
         background:#efeae4;
          padding:5px;
	margin:.5em;
	font-size:.9em;
	 -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
		width: 2.5cm;
		text-align: center;
        font-family: 'Vollkorn', serif;
        border:solid 1px;
        border-color:#000020;
	}

    input[type='submit']:hover {
            background:#99827e;
        border-color:#000020;
        color:#e5dcd0;
    }
#adv_button {
    float:right;
    color:#000020;
    background:#efeae4;
	margin:.5em;
    padding:5px;
	font-size:.9em;
	 -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
		width: 3.5cm;
		text-align: center;
    font-family: 'Vollkorn', serif;
    border:solid 1px;
    border-color:#000020;
	}
    #adv_button:hover{
        background:#99827e;
        border-color:#000020;
        color:#e5dcd0;
    }
	
	#advanced_container > button {
            background:#efeae4;
		margin-top:1.5em;
        padding:5px;
		margin-bottom:1.5em;
	font-size:.9em;
	 -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
		width: 3.5cm;
		text-align: center;
        font-family: 'Vollkorn', serif;
           border:solid 1px;
           border-color:#000020;
	}
     #advanced_container > button:hover{
        background:#99827e;
        border-color:#000020;
        color:#e5dcd0;
    }
	
	#error {
		color: #b3002d;
	}

	.reset {
		display: block;
		width: 1in;
		margin: auto;
	}
</style>
<script type="text/javascript">
	function expand(event) {
		event.preventDefault();
		document.getElementById('advanced').style.height="initial";
		document.getElementById("adv_button").onclick = contract;
	}

	function contract(event) {
		event.preventDefault();
		document.getElementById('advanced').style.height='0in';
		document.getElementById("adv_button").onclick = expand;
	}

	function reset() {
		var opts = document.getElementsByTagName('option');
		for (var i = 0; i < opts.length; i++) {
			opts[i].selected = false;
		}
	}
	function dateChange(event) {
		var notBefore = parseInt(document.querySelector("#notBefore").value);
		var notAfter = parseInt(document.querySelector("#notAfter").value);

		console.log(notBefore);
		console.log(notAfter);

		var obj = document.querySelector('#error');
		if (notAfter < notBefore) {
			obj.innerText = ("Invalid date range!");
		} else {
			obj.innerText = "";
		}
	}
</script>
{% endblock %}

{% block content%}
{% block form%}
<form id="searchform" action="results" method="GET">
	<label for="fulltext">Full Text Search: <input type="text" name="text"></input></label>

	<input type="submit" value="Search"></input>
	<button id="adv_button" type="button" onclick="expand(event);">More Options</button>
	<br>
	<fieldset id="advanced">
	<div id="advanced_container">
	<table>
	<button class="reset" type="button" onclick="reset()">Reset Search</button>
	To search by publication, see <a href="{% url 'publications_url' %}">Publications</a>
 	<tr>
		<th>Transcription Status</th>
		<td>
			<input type="radio" name="status" value="transcription" checked>Show only fully transcribed inscriptions</input><br/>
			<input type="radio" name="status" value="metadata">Show all inscriptions that have metadata</input><br/>
			<input type="radio" name="status" value="bib_only">Show all inscriptions, even ones with only bibliographic information.</input>
		</td>
	</tr>
	<tr>
		<th>Date</th>
		<td>
			Use negative numbers to refer to years BCE (e.g., -100 refers to 100 BCE).<br/>
			<label for="notBefore">Not Before:<input id="notBefore" type="num" max="1000" min="-1000" step="1" name="notBefore" onchange="dateChange(event);"></input></label>
			<label for="notAfter">Not After:<input id="notAfter" type="num" max="1000" min="-1000" step="1" name="notAfter" onchange="dateChange(event);"></input></label>
			<span id="error"></span>
			<br/>
			<label for="date_type"><select name="date_type" value="inclusive">
				<option value="inclusive" checked>Inclusive (inscriptions whose range matches any part)</option>
				<option value="exclusive">Exclusive (inscriptions whose range is entirely contained)</option>
			</select></label>
		</td>
	</tr>
 	{% for field_val in facets %}
 	<tr>
	<th for="{{field_val.0}}">{{field_val.0|tax}}</th>
	<td>
	<select multiple name="{{field_val.0}}">
		<!-- <option value="NONE">Select...</option> -->
		{% for item in field_val.1 %}
			<option value="{{item.0}}">
				{{item.0|tax}}
			</option>
		{% endfor %}
	</select>
	</td>
	</tr>
	{% endfor %}
	<tr>
		<th>Fake</th>
		<td>
			<input type="radio" name="fake" value="include">Show inscriptions that are forgeries or counterfeit (falsi vel alieni)</input><br/>
			<input type="radio" name="fake" value="hide" checked>Don't show forgeries</input>
		</td>
	</tr>
	</table>
	</div>
	</fieldset>


	<br/>
</form>
{% endblock %}

{{error}}

{% endblock content %}

